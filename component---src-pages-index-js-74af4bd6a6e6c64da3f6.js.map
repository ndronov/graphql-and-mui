{"version":3,"file":"component---src-pages-index-js-74af4bd6a6e6c64da3f6.js","mappings":"uHAAO,SAASA,IACd,OAAuB,IAAhBC,KAAKC,SAAiB,EAC/B,C,uUCDW,EAAS,+BACTC,EAAiB,uCACjBC,EAAkB,wCAClBC,EAAY,kCACZC,EAAS,gCACTC,EAAa,oCCDjB,SAASC,EAAOC,GAAQ,IAAD,EAC5B,MAAM,UACJC,EAAY,GAAE,SACdC,EAAQ,KACRC,EAAO,UAAS,MAChBC,EAAK,QACLC,EAAO,GACPC,EAAE,KACFC,EAAO,UACLP,EAEEQ,EAA0C,QAA3B,EAAGC,EAAO,UAAUN,UAAO,QAAIM,EAEpD,OAAKH,EAcH,gBAAC,EAAAI,KAAI,CAACJ,GAAIA,EAAIL,UAAcQ,EAAgB,IAAIR,GAC9C,wBAAMA,UAAcQ,EAAgB,IAAIA,EAAa,IAAID,EAAe,IAAIC,GACzEL,IAdH,0BACEH,UAAcQ,EAAgB,IAAIA,EAAa,IAAID,EAAe,IAAIP,EACtEC,SAAUA,EACVG,QAASA,EACTE,KAAMA,GAELH,EAYT,C,qEClCO,SAASO,EAAKX,GACnB,MAAM,SAAEY,EAAQ,MAAEC,EAAK,SAAEC,GAAad,EAEtC,OACE,wBAAMC,UCPQ,2BDOgBa,SAAUA,EAAUC,YAAU,GAC1D,sBAAId,UCPS,6BDOiBY,GAC7BD,EAGP,C,yFETO,SAASI,EAAQC,QAAI,IAAJA,IAAAA,EAAO,CAAC,GAC9B,MAAM,WAAEC,EAAa,GAAIJ,SAAUK,EAAY,UAAEC,EAAS,UAAEC,GAAcJ,GACpE,EAACK,EAAO,EAACC,IAAaC,EAAAA,EAAAA,UAAS,CAAC,IAChC,EAACC,EAAQ,EAACC,IAAcF,EAAAA,EAAAA,WAAS,GAEjCG,GAAUC,EAAAA,EAAAA,cAAaC,IACzBN,GAAUO,IAAO,IAAUA,EAAS,CAACD,EAAEE,OAAOC,MAAO,QAAQ,GAC5D,IAGCC,GAAWL,EAAAA,EAAAA,cAAcC,IAC7B,MAAMK,EAAYL,EAAEE,OAAOI,qBAAqB,SAC1CC,EAASC,MAAMC,KAAKJ,GAGpBK,EADa,kBAAOC,EAAAA,KAAqB,OAAKtB,IACbuB,aAAY,CAACX,EAASY,KAAS,IAAWZ,KAAYY,EAAUN,MAAY,CAAC,GAEpHb,EAAUgB,GAIV,OAFyD,IAAzCI,OAAOC,KAAKL,GAAkBM,MAEhC,GACb,CAAC3B,IA0BJ,MAAO,CAAEI,SAAQG,UAASE,UAASb,UAxBlBc,EAAAA,EAAAA,cACfkB,UACEjB,EAAEkB,iBAIF,IAFgBd,EAASJ,GAEX,OAEdH,GAAW,GAEX,MAAMsB,GAAOC,EAAAA,EAAAA,IAAqBpB,GAC5BqB,QAAiB/B,EAAa6B,GAEpCtB,GAAW,GAENwB,EAASC,QAKd/B,EAAU8B,EAASE,SAJjB/B,EAAU6B,EAASE,QAIM,GAC1B,CAACnB,EAAUd,EAAcE,EAAWD,IAI3C,C,qECjDO,SAASiC,EAAMrD,GACpB,MAAM,aACJsD,EAAY,SACZpD,EAAQ,MACRqD,EAAK,MACLnD,EAAK,KACL4B,EAAI,QACJL,EAAO,SACP6B,EAAQ,KACRjD,GACEP,EAEJ,OACI,yBAAOC,UChBU,kCDiBdG,EAED,yBACEkD,aAAcA,EACdrD,UCnBS,6BDoBTC,SAAUA,EACV8B,KAAMA,EACNL,QAASA,EACT6B,SAAUA,EACVjD,KAAMA,IAGPgD,GAAS,wBAAMtD,UC5BL,8BD4B+BsD,GAGlD,C,qEE5BO,SAASE,EAAOzD,GACrB,MAAM,SAAEY,GAAaZ,EAErB,OACE,wBAAMC,UCRa,mCDShBW,EAGP,C,qEEXO,SAAS8C,EAAI1D,GAClB,MAAM,MAAEa,EAAK,SAAED,GAAaZ,EAE5B,OACE,gCACE,6BAAQa,GACPD,EAGP,C,uBCXO,SAASqC,EAAqBU,GACnC,MAAMC,EAAW,IAAIC,SAASF,EAAY5B,QACpC+B,EAAiB,CAAC,EAExB,IAAK,MAAOC,EAAWC,KAAeJ,EAASK,UAAW,EACxCD,aAAsBE,MAAQF,EAAWG,MAAQH,KAIjEF,EAAeC,GAAaC,EAC9B,CAEA,OAAOF,CACT,C,iFAoBO,SAASM,EAA4BC,EAAOC,GACjD,OAAO,SAAgClC,GACrC,MAAMmC,EAASnC,EAAOoC,MAAKC,GAAKA,EAAEzC,OAASqC,IACrCK,EAAStC,EAAOoC,MAAKC,GAAKA,EAAEzC,OAASsC,IAE3C,OAAIC,aAAM,EAANA,EAAQI,UAAUD,aAAM,EAANA,EAAQC,OACrB,CAAC,EAGH,CAAE,CAACL,GA1BgB,uBA2B5B,CACF,CAEO,MAAM9B,EAAwB,CA5B9B,SAAgCJ,GACrC,MAAMd,EAAS,CAAC,EAEhB,IAAK,MAAMsD,KAASxC,GACdwC,EAAMpB,UAAaoB,EAAMD,aAKtBrD,EAAOsD,EAAM5C,MAJlBV,EAAOsD,EAAM5C,MARa,gBAe9B,OAAOV,CACT,E,kLCpBA,MAOMuD,EAAc,CAClB/D,SCjBKgC,eAAyB7B,GAC9B6D,QAAQC,KAAK,iBAAkB9D,GAE/B,MAAMiC,GAAW3D,EAAAA,EAAAA,KAAc,CAC7B4D,SAAS,EACTC,QAAS,CACP4B,QAAS,mCAET,CACF7B,SAAS,EACTC,QAAS,CACP4B,QAAS,yCAIb,OAAO,IAAIC,SAAQC,IACjBC,YAAW,IAAMD,EAAQhC,IAAW,KAAS,GAEjD,EDAE9B,UATWgE,IACXC,OAAOC,SAAW,oBAClBR,QAAQS,IAAI,YAAaH,EAAM,EAQ/B/D,UALU+D,GAAUN,QAAQS,IAAI,aAAcH,IAQzC,SAASI,IACd,MAAM,OAAElE,EAAM,QAAEG,EAAO,SAAEX,EAAQ,QAAEa,IAAYX,EAAAA,EAAAA,GAAQ6D,GAEvD,OACE,gBAAClE,EAAA,EAAI,CAACG,SAAUA,EAAUD,MAAM,WAC9B,gBAACwC,EAAAoC,EAAK,CACJvF,SAAUuB,EACV8B,MAAOjC,EAAOoE,MACdC,GAAG,QACHvF,MAAM,QACN4B,KAAK,QACLL,QAASA,EACT6B,UAAQ,EACRjD,KAAK,UAGP,gBAAC8C,EAAAoC,EAAK,CACJvF,SAAUuB,EACV8B,MAAOjC,EAAOsE,SACdD,GAAG,WACHvF,MAAM,WACN4B,KAAK,WACLL,QAASA,EACT6B,UAAQ,EACRjD,KAAK,aAGP,uBAAKN,UElDM,kCFoDX,gBAACF,EAAA,EAAM,CACLG,SAAUuB,EACVrB,MAAM,UACNG,KAAK,WAGP,gBAACR,EAAA,EAAM,CACLE,UE1DkB,2CF2DlBE,KAAK,WACLC,MAAM,iBACNE,GAAG,WAIX,CGhDO,SAASuF,IACd,OAAO,gBAACnC,EAAA,EAAG,CAAC7C,MAAM,WACpB,CAEA,MAjBA,WACE,OACE,gBAAC4C,EAAA,EAAM,KACL,gBAAC+B,EAAU,MAGjB,C","sources":["webpack://welcome-to-mars/./src/api/http.js","webpack://welcome-to-mars/./src/components/Button/button.module.css","webpack://welcome-to-mars/./src/components/Button/Button.js","webpack://welcome-to-mars/./src/components/Form/Form.js","webpack://welcome-to-mars/./src/components/Form/form.module.css","webpack://welcome-to-mars/./src/components/Form/useForm.js","webpack://welcome-to-mars/./src/components/Input/Input.js","webpack://welcome-to-mars/./src/components/Input/input.module.css","webpack://welcome-to-mars/./src/components/Layout/Layout.js","webpack://welcome-to-mars/./src/components/Layout/layout.module.css","webpack://welcome-to-mars/./src/components/Seo/Seo.js","webpack://welcome-to-mars/./src/helpers/forms.js","webpack://welcome-to-mars/./src/components/SignInForm/SignInForm.js","webpack://welcome-to-mars/./src/api/SignInAPI.js","webpack://welcome-to-mars/./src/components/SignInForm/SignInForm.module.css","webpack://welcome-to-mars/./src/pages/index.js"],"sourcesContent":["export function hitOrMiss() {\n  return Math.random() * 100 > 42;\n}\n","// extracted by mini-css-extract-plugin\nexport var button = \"button-module--button--07666\";\nexport var button_default = \"button-module--button_default--9cd41\";\nexport var button_outlined = \"button-module--button_outlined--cd2cd\";\nexport var container = \"button-module--container--1fadd\";\nexport var faSpin = \"button-module--fa-spin--f705e\";\nexport var linkAnchor = \"button-module--link-anchor--2ffe7\";","import React from 'react'\nimport { Link } from 'gatsby'\n\nimport * as styles from './button.module.css'\n\nexport function Button(props) {\n  const {\n    className = '',\n    disabled,\n    kind = 'default',\n    label,\n    onClick,\n    to,\n    type = 'button',\n  } = props\n\n  const buttonKindStyle = styles[`button_${kind}`] ?? styles[`button_default`]\n\n  if (!to) {\n    return (\n      <button\n        className={`${styles.container} ${styles.button} ${buttonKindStyle} ${className}`}\n        disabled={disabled}\n        onClick={onClick}\n        type={type}\n      >\n        {label}\n      </button>\n    )\n  }\n\n  return (\n    <Link to={to} className={`${styles.container} ${className}`}>\n      <span className={`${styles.container} ${styles.button} ${buttonKindStyle} ${styles.linkAnchor}`}>\n        {label}\n      </span>\n    </Link>\n  )\n}\n","import React from 'react'\n\nimport * as styles from './form.module.css'\n\nexport function Form(props) {\n  const { children, title, onSubmit } = props;\n\n  return (\n    <form className={styles.form} onSubmit={onSubmit} noValidate>\n      <h1 className={styles.title}>{title}</h1>\n      {children}\n    </form>\n  )\n}\n","// extracted by mini-css-extract-plugin\nexport var form = \"form-module--form--1ed52\";\nexport var title = \"form-module--title--a5c2d\";","import { useCallback, useState } from 'react'\r\n\r\nimport { getSubmittedFormData, defaultFormValidators } from '../../helpers/forms'\r\n\r\nexport function useForm(args = {}) {\r\n  const { validators = [], onSubmit: handleSubmit, onSuccess, onFailure } = args\r\n  const [errors, setErrors] = useState({})\r\n  const [pending, setPending] = useState(false)\r\n\r\n  const onFocus = useCallback((e) => {\r\n      setErrors(current => ({ ...current, [e.target.name]: null }))\r\n    }, []\r\n  )\r\n\r\n  const validate = useCallback( (e) => {\r\n    const rawInputs = e.target.getElementsByTagName('input')\r\n    const inputs = Array.from(rawInputs)\r\n\r\n    const allValidators = [...defaultFormValidators, ...validators]\r\n    const validationErrors = allValidators.reduceRight((current, validator) => ({ ...current, ...validator(inputs) }), {})\r\n\r\n    setErrors(validationErrors)\r\n\r\n    const isValid = Object.keys(validationErrors).length === 0\r\n\r\n    return isValid\r\n  }, [validators])\r\n\r\n  const onSubmit = useCallback(\r\n    async (e) => {\r\n      e.preventDefault()\r\n\r\n      const isValid = validate(e)\r\n\r\n      if (!isValid) return\r\n\r\n      setPending(true)\r\n\r\n      const data = getSubmittedFormData(e)\r\n      const response = await handleSubmit(data)\r\n\r\n      setPending(false)\r\n\r\n      if (!response.success) {\r\n        onFailure(response.payload);\r\n        return;\r\n      }\r\n\r\n      onSuccess(response.payload)\r\n    }, [validate, handleSubmit, onFailure, onSuccess]\r\n  )\r\n\r\n  return { errors, pending, onFocus, onSubmit }\r\n}\r\n","import React from 'react'\n\nimport * as styles from './input.module.css'\n\nexport function Input(props) {\n  const {\n    autoComplete,\n    disabled,\n    error,\n    label,\n    name,\n    onFocus,\n    required,\n    type,\n  } = props;\n\n  return (\n      <label className={styles.container}>\n        {label}\n\n        <input\n          autoComplete={autoComplete}\n          className={styles.input}\n          disabled={disabled}\n          name={name}\n          onFocus={onFocus}\n          required={required}\n          type={type}\n        />\n\n        {error && <span className={styles.error}>{error}</span>}\n      </label>\n  )\n}\n","// extracted by mini-css-extract-plugin\nexport var container = \"input-module--container--06e11\";\nexport var error = \"input-module--error--c56a0\";\nexport var input = \"input-module--input--20e43\";","import React from 'react'\n\nimport './global.css'\nimport * as styles from './layout.module.css'\n\nexport function Layout(props) {\n  const { children } = props\n\n  return (\n    <main className={styles.container}>\n      {children}\n    </main>\n  )\n}\n","// extracted by mini-css-extract-plugin\nexport var container = \"layout-module--container--66d73\";","import React from 'react'\n\nexport function Seo(props) {\n  const { title, children } = props\n\n  return (\n    <>\n      <title>{title}</title>\n      {children}\n    </>\n  )\n}\n","export function getSubmittedFormData(submitEvent) {\r\n  const formData = new FormData(submitEvent.target)\r\n  const nonEmptyFields = {}\r\n\r\n  for (const [fieldName, fieldValue] of formData.entries()) {\r\n    const isEmpty = fieldValue instanceof File ? !fieldValue.size : !fieldValue\r\n\r\n    if (isEmpty) continue\r\n\r\n    nonEmptyFields[fieldName] = fieldValue\r\n  }\r\n\r\n  return nonEmptyFields\r\n}\r\n\r\nconst FIELD_REQUIREMENT_ERROR = 'Enter a value'\r\nconst FIELDS_EQUALITY_ERROR = 'Values did not match'\r\n\r\nexport function validateRequiredFields(inputs) {\r\n  const errors = {}\r\n\r\n  for (const input of inputs) {\r\n    if (input.required && !input.value) {\r\n      errors[input.name] = FIELD_REQUIREMENT_ERROR\r\n      continue;\r\n    }\r\n\r\n    delete errors[input.name]\r\n  }\r\n\r\n  return errors\r\n}\r\n\r\nexport function makeFieldsEqualityValidator(name1, name2) {\r\n  return function validateFieldsEquality(inputs) {\r\n    const field1 = inputs.find(i => i.name === name1)\r\n    const field2 = inputs.find(i => i.name === name2)\r\n\r\n    if (field1?.value === field2?.value) {\r\n      return {}\r\n    }\r\n\r\n    return { [name2]: FIELDS_EQUALITY_ERROR }\r\n  }\r\n}\r\n\r\nexport const defaultFormValidators = [validateRequiredFields]\r\n","import React from 'react'\n\nimport { Input } from '../Input'\nimport { Button } from '../Button'\nimport { Form } from '../Form'\nimport { useForm } from '../Form/useForm'\n\nimport { SignInAPI } from '../../api/SignInAPI';\n\nimport * as styles from './SignInForm.module.css'\n\nconst yes = (param) => {\n  window.location = 'https://mars.com/'\n  console.log('успех....', param)\n}\n\nconst no = (param) => console.log('провал....', param)\n\nconst useFormArgs = {\n  onSubmit: SignInAPI,\n  onSuccess: yes,\n  onFailure: no,\n}\n\nexport function SignInForm() {\n  const { errors, pending, onSubmit, onFocus } = useForm(useFormArgs)\n\n  return (\n    <Form onSubmit={onSubmit} title=\"Sign in\">\n      <Input\n        disabled={pending}\n        error={errors.email}\n        id=\"email\"\n        label=\"Email\"\n        name=\"email\"\n        onFocus={onFocus}\n        required\n        type=\"email\"\n      />\n\n      <Input\n        disabled={pending}\n        error={errors.password}\n        id=\"password\"\n        label=\"Password\"\n        name=\"password\"\n        onFocus={onFocus}\n        required\n        type=\"password\"\n      />\n\n      <div className={styles.gap} />\n\n      <Button\n        disabled={pending}\n        label=\"Sign in\"\n        type=\"submit\"\n      />\n\n      <Button\n        className={styles.signUpButton}\n        kind=\"outlined\"\n        label=\"Create account\"\n        to=\"signup\"\n      />\n    </Form>\n  )\n}\n","import { hitOrMiss } from './http'\n\nexport async function SignInAPI(args) {\n  console.info('Sign in try...', args)\n\n  const response = hitOrMiss() ? {\n    success: true,\n    payload: {\n      message: 'You are successfully logged in'\n    }\n  } : {\n    success: false,\n    payload: {\n      message: 'Error, please check your credentials'\n    }\n  }\n\n  return new Promise(resolve => {\n    setTimeout(() => resolve(response), 42 * 100)\n  });\n}\n","// extracted by mini-css-extract-plugin\nexport var gap = \"SignInForm-module--gap--bba7f\";\nexport var signUpButton = \"SignInForm-module--sign-up-button--3fcdc\";","import React from 'react'\n\nimport { Seo } from '../components/Seo'\nimport { Layout } from '../components/Layout'\nimport { SignInForm } from '../components/SignInForm'\n\nfunction IndexPage() {\n  return (\n    <Layout>\n      <SignInForm />\n    </Layout>\n  )\n}\n\n/**\n * Head export to define metadata for the page\n *\n * See: https://www.gatsbyjs.com/docs/reference/built-in-components/gatsby-head/\n */\nexport function Head() {\n  return <Seo title=\"Sign in\" />\n}\n\nexport default IndexPage\n"],"names":["hitOrMiss","Math","random","button_default","button_outlined","container","faSpin","linkAnchor","Button","props","className","disabled","kind","label","onClick","to","type","buttonKindStyle","styles","Link","Form","children","title","onSubmit","noValidate","useForm","args","validators","handleSubmit","onSuccess","onFailure","errors","setErrors","useState","pending","setPending","onFocus","useCallback","e","current","target","name","validate","rawInputs","getElementsByTagName","inputs","Array","from","validationErrors","defaultFormValidators","reduceRight","validator","Object","keys","length","async","preventDefault","data","getSubmittedFormData","response","success","payload","Input","autoComplete","error","required","Layout","Seo","submitEvent","formData","FormData","nonEmptyFields","fieldName","fieldValue","entries","File","size","makeFieldsEqualityValidator","name1","name2","field1","find","i","field2","value","input","useFormArgs","console","info","message","Promise","resolve","setTimeout","param","window","location","log","SignInForm","I","email","id","password","Head"],"sourceRoot":""}